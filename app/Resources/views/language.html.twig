<ul class="nav navbar-nav navbar-right">
    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
            <i class="glyphicon glyphicon-globe"></i> <span class="caret"></span>
        </a>
        <ul class="dropdown-menu" role="menu">
            {% for locale in locales() %}
                <li {% if app.request.locale == locale.code %}class="active"{% endif %}>
                    <a href="{{ path(app.request.get('_route', 'homepage'), app.request.get('_route_params', [])|merge({ _locale: locale.code })) }}">{{ locale.name|capitalize }}</a>
                </li>
            {% endfor %}
        </ul>
    </li>
</ul>